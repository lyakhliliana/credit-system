## Организация:

P.S. на паре говорили, что есть возможность создания процесса(Job),
который будет с каким-то интервалом выполнять работу по синхронизации данных.
Мне понравился этот вариант, потому что так проще всего учесть падения запросов: 
если произойдет, то просто процесс возобновиться после какого-то интервала, а все состояния 
будут сохранены.

### PE:

1. есть процесс, который вытягивает договора со статусом NEW (Job)
2. обрабатывает запрос на обновление статусов из NEW/IN_PROGRESS в REJECT/APPROVED

### Origination:

1. хранит в себе идентификационный номер и статус проверки договора
2. содержит процесс, который работает со статусами NEW в зависимости от Scoring
3. обрабатывает запрос на POST от Job
4. содержит процесс, который работает со статусами REJECT и APPROVED (на потом: Scoring и PG)

## Взаимодействия:

1. Взаимодействия API и PE:

    * клиент отправляет свои данные
    * PE создает клиента, если его нет
    * PE создает договор со статусом NEW и расписание к нему

2. Взаимодействия PE и Origination через Job:

    * PE-1 отправляет новые договора в Origination-3, ожидая обратно получить статусы(IN_PROGRESS, REFUSED, APPROVED)
      этих договоров и установить их у себя в бд
    * Origination-3 получает запрос на POST и отправляет обратно со статусом IN_PROGRESS договора, которые создала
      или уже были с этим статусом, и те, которые уже были и помечены как REJECT или APPROVED(могли не дойти до этого).

    * Origination-4 получает все REJECT и APPROVED договора из Origination-1 и отправляет их в PE,
      ожидая увидеть ОК на запрос и сменить статус на PAYMENT_PENDING в отправленных договорах
    * PE-2 получает договора, обновляет статусы, отправляет ОК

## Возможные проблемы:

1. **Проблема:** Падает отправка договоров NEW PE-1 --> Origination-3  
   **Решение:** Статус не поменяется, поэтому отправка произойдет в следующей итерации PE-1
2. **Проблема:** Падает отправка ответа Origination-3 --> PE-1  
   **Решение:** Процесс отправки инициируется снова и чекер в Origination-3 просто скажет, что они созданы 
     и отправит повторно статус.
3. **Проблема:** Падает отправка договоров Origination-4 --> PE-2  
   **Решение:** Статус не поменяется, поэтому отправка произойдет в следующей итерации Origination-4  
4. **Проблема:** Падает отправка ответа PE-2 --> Origination-4.   
   **Решение:** Процесс отправки инициируется снова и чекер в PE-2 просто выполнит работу 
     и отправит повторно ответ.

